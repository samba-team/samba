# $Id$

SHELL		= /bin/sh

srcdir		= @srcdir@
top_srcdir	= @top_srcdir@
VPATH		= @srcdir@

CC 	= @CC@
AR	= ar
RANLIB 	= @RANLIB@
DEFS 	= @DEFS@
CFLAGS 	= @CFLAGS@ @WFLAGS@
WFLAGS = @WFLAGS@

INSTALL = @INSTALL@

prefix 	= @prefix@

SOURCES = glob.c sockbuf.c buffer.c
OBJECTS = $(libcommon_OBJS)

libcommon_OBJS = glob.o sockbuf.o buffer.o

LIBNAME = $(LIBPREFIX)common
LIBEXT = a
LIBPREFIX = @LIBPREFIX@
LIB = $(LIBNAME).$(LIBEXT)

all: $(LIB)

.c.o:
	$(CC) -c -I$(srcdir) -I../../../include $(DEFS) $(CFLAGS) $(CPPFLAGS) $<

$(LIB): $(libcommon_OBJS)
	rm -f $@
	ar cr $@ $(libcommon_OBJS)
	-$(RANLIB) $@

install:

uninstall:

TAGS: $(SOURCES)
	etags $(SOURCES)

clean cleandir:
	rm -f *~ *.o libcommon.a core \#*

distclean: 
	rm -f Makefile

$(OBJECTS): ../../../include/config.h

.PHONY: all install uninstall clean cleandir distclean
