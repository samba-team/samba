<chapter id="FAQ-Printing">
<chapterinfo>
<author>
	<firstname>Ronan</firstname><surname>Waide</surname>
</author>
</chapterinfo>

<title>Printing problems</title>

<sect1>
<title>setdriver or cupsaddsmb failes</title>
<para>
setdriver expects the following setup:

<simplelist>
<member>you are a printer admin, or root. this is the smb.conf printer admin group, not the Printer Operators group in NT. I've not tried the latter, but I don't believe it will work based on the current code.</member>
<member>printer admins has to be defined in [global]</member>
<member>upload the driver files to \\server\print$\w32x86 and win40 as appropriate. DON'T put them in the 0 or 2 subdirectories.</member>
<member>Make sure that the user you're connecting as is able to write to the print$ directories</member>
<member>Use adddriver (with appropriate parameters) to create the driver. note, this will not just update samba's notion of drivers, it will also move the files from the w32x86 and win40 directories to an appropriate subdirectory (based on driver version, I think, but not important enough for me to find out)</member>
<member>Use setdriver to associate the driver with a printer</member>
</simplelist>

<para>
The setdriver call will fail if the printer doesn't already exist in
samba's view of the world. Either create the printer in cups and
restart samba, or create an add printer command (see smb.conf doco)
and use RPC calls to create a printer. NB the add printer command MUST
return a single line of text indicating which port the printer was
added on. If it doesn't, Samba won't reload the printer
definitions. Although samba doesn't really support the notion of
ports, suitable add printer command and enumport command settings can
allow you pretty good remote control of the samba printer setup.
</para>
</sect1>
</chapter>
