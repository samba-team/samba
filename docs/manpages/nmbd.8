.\" This manpage has been automatically generated by docbook2man-spec
.\" from a DocBook document.  docbook2man-spec can be found at:
.\" <http://shell.ipoline.com/~elmert/hacks/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "NMBD" "8" "08 May 2002" "" ""
.SH NAME
nmbd \- NetBIOS name server to provide NetBIOS  over IP naming services to clients
.SH SYNOPSIS
.sp
\fBnmbd\fR [ \fB-D\fR ]  [ \fB-a\fR ]  [ \fB-i\fR ]  [ \fB-o\fR ]  [ \fB-P\fR ]  [ \fB-h\fR ]  [ \fB-V\fR ]  [ \fB-d <debug level>\fR ]  [ \fB-H <lmhosts file>\fR ]  [ \fB-l <log directory>\fR ]  [ \fB-n <primary netbios name>\fR ]  [ \fB-p <port number>\fR ]  [ \fB-s <configuration file>\fR ] 
.SH "DESCRIPTION"
.PP
This program is part of the Samba suite.
.PP
\fBnmbd\fR is a server that understands 
and can reply to NetBIOS over IP name service requests, like 
those produced by SMB/CIFS clients such as Windows 95/98/ME, 
Windows NT, Windows 2000, and LanManager clients. It also
participates in the browsing protocols which make up the 
Windows "Network Neighborhood" view.
.PP
SMB/CIFS clients, when they start up, may wish to 
locate an SMB/CIFS server. That is, they wish to know what 
IP number a specified host is using.
.PP
Amongst other services, \fBnmbd\fR will 
listen for such requests, and if its own NetBIOS name is 
specified it will respond with the IP number of the host it 
is running on. Its "own NetBIOS name" is by
default the primary DNS name of the host it is running on, 
but this can be overridden with the \fB-n\fR 
option (see OPTIONS below). Thus \fBnmbd\fR will 
reply to broadcast queries for its own name(s). Additional
names for \fBnmbd\fR to respond on can be set 
via parameters in the \fI smb.conf(5)\fRconfiguration file.
.PP
\fBnmbd\fR can also be used as a WINS 
(Windows Internet Name Server) server. What this basically means 
is that it will act as a WINS database server, creating a 
database from name registration requests that it receives and 
replying to queries from clients for these names.
.PP
In addition, \fBnmbd\fR can act as a WINS 
proxy, relaying broadcast queries from clients that do 
not understand how to talk the WINS protocol to a WIN 
server.
.SH "OPTIONS"
.TP
\fB-D\fR
If specified, this parameter causes 
\fBnmbd\fR to operate as a daemon. That is, 
it detaches itself and runs in the background, fielding 
requests on the appropriate port. By default, \fBnmbd\fR 
will operate as a daemon if launched from a command shell. 
nmbd can also be operated from the \fBinetd\fR 
meta-daemon, although this is not recommended.
.TP
\fB-a\fR
If this parameter is specified, each new 
connection will append log messages to the log file. 
This is the default.
.TP
\fB-i\fR
If this parameter is specified it causes the
server to run "interactively", not as a daemon, even if the
server is executed on the command line of a shell. Setting this
parameter negates the implicit deamon mode when run from the
command line.
.TP
\fB-o\fR
If this parameter is specified, the 
log files will be overwritten when opened. By default, 
\fBsmbd\fR will append entries to the log 
files.
.TP
\fB-h\fR
Prints the help information (usage) 
for \fBnmbd\fR.
.TP
\fB-H <filename>\fR
NetBIOS lmhosts file. The lmhosts 
file is a list of NetBIOS names to IP addresses that 
is loaded by the nmbd server and used via the name 
resolution mechanism  name resolve order
to resolve any NetBIOS name queries needed by the server. Note 
that the contents of this file are \fBNOT\fR 
used by \fBnmbd\fR to answer any name queries. 
Adding a line to this file affects name NetBIOS resolution 
from this host \fBONLY\fR.

The default path to this file is compiled into 
Samba as part of the build process. Common defaults 
are \fI/usr/local/samba/lib/lmhosts\fR,
\fI/usr/samba/lib/lmhosts\fR or
\fI/etc/lmhosts\fR. See the  \fIlmhosts(5)\fRman page for details on the 
contents of this file.
.TP
\fB-V\fR
Prints the version number for 
\fBnmbd\fR.
.TP
\fB-d <debug level>\fR
debuglevel is an integer 
from 0 to 10. The default value if this parameter is 
not specified is zero.

The higher this value, the more detail will 
be logged to the log files about the activities of the 
server. At level 0, only critical errors and serious 
warnings will be logged. Level 1 is a reasonable level for
day to day running - it generates a small amount of 
information about operations carried out.

Levels above 1 will generate considerable amounts 
of log data, and should only be used when investigating 
a problem. Levels above 3 are designed for use only by developers 
and generate HUGE amounts of log data, most of which is extremely 
cryptic.

Note that specifying this parameter here will override 
the log level
parameter in the \fI smb.conf\fRfile.
.TP
\fB-l <log directory>\fR
The -l parameter specifies a directory 
into which the "log.nmbd" log file will be created
for operational data from the running
\fBnmbd\fR server. The default log directory is compiled into Samba
as part of the build process. Common defaults are \fI /usr/local/samba/var/log.nmb\fR, \fI /usr/samba/var/log.nmb\fR or
\fI/var/log/log.nmb\fR. \fBBeware:\fR
If the directory specified does not exist, \fBnmbd\fR
will log to the default debug log location defined at compile time.
.TP
\fB-n <primary NetBIOS name>\fR
This option allows you to override
the NetBIOS name that Samba uses for itself. This is identical 
to setting the  NetBIOS nameparameter in the  
\fIsmb.conf\fRfile. However, a command
line setting will take precedence over settings in 
\fIsmb.conf\fR.
.TP
\fB-p <UDP port number>\fR
UDP port number is a positive integer value.
This option changes the default UDP port number (normally 137)
that \fBnmbd\fR responds to name queries on. Don't
use this option unless you are an expert, in which case you
won't need help!
.TP
\fB-s <configuration file>\fR
The default configuration file name
is set at build time, typically as \fI /usr/local/samba/lib/smb.conf\fR, but
this may be changed when Samba is autoconfigured.

The file specified contains the configuration details
required by the server. See  \fIsmb.conf(5)\fRfor more information.
.SH "FILES"
.TP
\fB\fI/etc/inetd.conf\fB\fR
If the server is to be run by the
\fBinetd\fR meta-daemon, this file
must contain suitable startup information for the
meta-daemon. See the UNIX_INSTALL.htmldocument
for details.
.TP
\fB\fI/etc/rc\fB\fR
or whatever initialization script your
system uses).

If running the server as a daemon at startup,
this file will need to contain an appropriate startup
sequence for the server. See the UNIX_INSTALL.htmldocument
for details.
.TP
\fB\fI/etc/services\fB\fR
If running the server via the
meta-daemon \fBinetd\fR, this file
must contain a mapping of service name (e.g., netbios-ssn)
to service port (e.g., 139) and protocol type (e.g., tcp).
See the UNIX_INSTALL.html
document for details.
.TP
\fB\fI/usr/local/samba/lib/smb.conf\fB\fR
This is the default location of the
\fIsmb.conf\fR
server configuration file. Other common places that systems
install this file are \fI/usr/samba/lib/smb.conf\fR
and \fI/etc/smb.conf\fR.

When run as a WINS server (see the
wins support
parameter in the \fIsmb.conf(5)\fR man page),
\fBnmbd\fR
will store the WINS database in the file \fIwins.dat\fR
in the \fIvar/locks\fR directory configured under
wherever Samba was configured to install itself.

If \fBnmbd\fR is acting as a \fB browse master\fR (see the local master
parameter in the \fIsmb.conf(5)\fR man page,
\fBnmbd\fR
will store the browsing database in the file \fIbrowse.dat
\fRin the \fIvar/locks\fR directory
configured under wherever Samba was configured to install itself.
.SH "SIGNALS"
.PP
To shut down an \fBnmbd\fR process it is recommended
that SIGKILL (-9) \fBNOT\fR be used, except as a last
resort, as this may leave the name database in an inconsistent state.
The correct way to terminate \fBnmbd\fR is to send it
a SIGTERM (-15) signal and wait for it to die on its own.
.PP
\fBnmbd\fR will accept SIGHUP, which will cause
it to dump out its namelists into the file \fInamelist.debug
\fRin the \fI/usr/local/samba/var/locks\fR
directory (or the \fIvar/locks\fR directory configured
under wherever Samba was configured to install itself). This will also
cause \fBnmbd\fR to dump out its server database in
the \fIlog.nmb\fR file.
.PP
The debug log level of nmbd may be raised or lowered using
\fBsmbcontrol(1)\fR
(SIGUSR[1|2] signals are no longer used in Samba 2.2). This is
to allow transient problems to be diagnosed, whilst still running
at a normally low log level.
.SH "VERSION"
.PP
This man page is correct for version 2.2 of 
the Samba suite.
.SH "SEE ALSO"
.PP
\fBinetd(8)\fR, \fBsmbd(8)\fR, 
\fIsmb.conf(5)\fR
, \fBsmbclient(1)
\fR, and the Internet RFC's
\fIrfc1001.txt\fR, \fIrfc1002.txt\fR. 
In addition the CIFS (formerly SMB) specification is available 
as a link from the Web page  
http://samba.org/cifs/ <URL:http://samba.org/cifs/>.
.SH "AUTHOR"
.PP
The original Samba software and related utilities 
were created by Andrew Tridgell. Samba is now developed
by the Samba Team as an Open Source project similar 
to the way the Linux kernel is developed.
.PP
The original Samba man pages were written by Karl Auer. 
The man page sources were converted to YODL format (another 
excellent piece of Open Source software, available at
ftp://ftp.icce.rug.nl/pub/unix/ <URL:ftp://ftp.icce.rug.nl/pub/unix/>) and updated for the Samba 2.0 
release by Jeremy Allison. The conversion to DocBook for 
Samba 2.2 was done by Gerald Carter
