.\"Generated by db2man.xsl. Don't modify this, modify the source.
.de Sh \" Subsection
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.TH "SMBTAR" 1 "" "" ""
.SH NAME
smbtar \- shell script for backing up SMB/CIFS shares directly to UNIX tape drives
.SH "SYNOPSIS"

.nf
\fBsmbtar\fR [-r] [-i] [-a] [-v] {-s server} [-p password] [-x services] [-X] [-N filename]
       [-b blocksize] [-d directory] [-l loglevel] [-u user] [-t tape] {filenames}
      
.fi

.SH "DESCRIPTION"

.PP
This tool is part of the \fBSamba\fR(7) suite\&.

.PP
\fBsmbtar\fR is a very small shell script on top of \fBsmbclient\fR(1) which dumps SMB shares directly to tape\&.

.SH "OPTIONS"

.TP
-s server
The SMB/CIFS server that the share resides upon\&.


.TP
-x service
The share name on the server to connect to\&. The default is "backup"\&.


.TP
-X
Exclude mode\&. Exclude filenames\&.\&.\&. from tar create or restore\&.


.TP
-d directory
Change to initial \fIdirectory \fR before restoring / backing up files\&.


.TP
-v
Verbose mode\&.


.TP
-p password
The password to use to access a share\&. Default: none


.TP
-u user
The user id to connect as\&. Default: UNIX login name\&.


.TP
-a
Reset DOS archive bit mode to indicate file has been archived\&.


.TP
-t tape
Tape device\&. May be regular file or tape device\&. Default: \fI$TAPE\fR environmental variable; if not set, a file called \fItar\&.out \fR\&.


.TP
-b blocksize
Blocking factor\&. Defaults to 20\&. See \fBtar(1)\fR for a fuller explanation\&.


.TP
-N filename
Backup only files newer than filename\&. Could be used (for example) on a log file to implement incremental backups\&.


.TP
-i
Incremental mode; tar files are only backed up if they have the archive bit set\&. The archive bit is reset after each file is read\&.


.TP
-r
Restore\&. Files are restored to the share from the tar file\&.


.TP
-l log level
Log (debug) level\&. Corresponds to the \fI-d\fR flag of \fBsmbclient\fR(1)\&.


.SH "ENVIRONMENT VARIABLES"

.PP
The \fI$TAPE\fR variable specifies the default tape device to write to\&. May be overridden with the -t option\&.

.SH "BUGS"

.PP
The \fBsmbtar\fR script has different options from ordinary tar and from smbclient's tar command\&.

.SH "CAVEATS"

.PP
Sites that are more careful about security may not like the way the script handles PC passwords\&. Backup and restore work on entire shares; should work on file lists\&. smbtar works best with GNU tar and may not work well with other versions\&.

.SH "DIAGNOSTICS"

.PP
See the \fBDIAGNOSTICS\fR section for the \fBsmbclient\fR(1) command\&.

.SH "VERSION"

.PP
This man page is correct for version 3\&.0 of the Samba suite\&.

.SH "SEE ALSO"

.PP
\fBsmbd\fR(8), \fBsmbclient\fR(1), \fBsmb.conf\fR(5)\&.

.SH "AUTHOR"

.PP
The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.

.PP
Ricky Poulten wrote the tar extension and this man page\&. The \fBsmbtar\fR script was heavily rewritten and improved by Martin Kraemer\&. Many thanks to everyone who suggested extensions, improvements, bug fixes, etc\&. The man page sources were converted to YODL format (another excellent piece of Open Source software, available at ftp://ftp\&.icce\&.rug\&.nl/pub/unix/) and updated for the Samba 2\&.0 release by Jeremy Allison\&. The conversion to DocBook for Samba 2\&.2 was done by Gerald Carter\&. The conversion to DocBook XML 4\&.2 for Samba 3\&.0 was done by Alexander Bokovoy\&.

