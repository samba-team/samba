.\" This manpage has been automatically generated by docbook2man-spec
.\" from a DocBook document.  docbook2man-spec can be found at:
.\" <http://shell.ipoline.com/~elmert/hacks/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "SMBTAR" "1" "02 May 2002" "" ""
.SH NAME
smbtar \- shell script for backing up SMB/CIFS shares  directly to UNIX tape drives
.SH SYNOPSIS
.sp
\fBsmbtar\fR \fB-s server\fR [ \fB-p password\fR ]  [ \fB-x services\fR ]  [ \fB-X\fR ]  [ \fB-d directory\fR ]  [ \fB-u user\fR ]  [ \fB-t tape\fR ]  [ \fB-t tape\fR ]  [ \fB-b blocksize\fR ]  [ \fB-N filename\fR ]  [ \fB-i\fR ]  [ \fB-r\fR ]  [ \fB-l loglevel\fR ]  [ \fB-v\fR ]  \fBfilenames\fR
.SH "DESCRIPTION"
.PP
This tool is part of the  Sambasuite.
.PP
\fBsmbtar\fR is a very small shell script on top 
of \fBsmbclient(1)\fR
which dumps SMB shares directly to tape. 
.SH "OPTIONS"
.TP
\fB-s server\fR
The SMB/CIFS server that the share resides 
upon.
.TP
\fB-x service\fR
The share name on the server to connect to. 
The default is "backup".
.TP
\fB-X\fR
Exclude mode. Exclude filenames... from tar 
create or restore. 
.TP
\fB-d directory\fR
Change to initial \fIdirectory
\fRbefore restoring / backing up files. 
.TP
\fB-v\fR
Verbose mode.
.TP
\fB-p password\fR
The password to use to access a share. 
Default: none 
.TP
\fB-u user\fR
The user id to connect as. Default: 
UNIX login name. 
.TP
\fB-t tape\fR
Tape device. May be regular file or tape 
device. Default: \fI$TAPE\fR environmental 
variable; if not set, a file called \fItar.out
\fR\&. 
.TP
\fB-b blocksize\fR
Blocking factor. Defaults to 20. See
\fBtar(1)\fR for a fuller explanation. 
.TP
\fB-N filename\fR
Backup only files newer than filename. Could 
be used (for example) on a log file to implement incremental
backups. 
.TP
\fB-i\fR
Incremental mode; tar files are only backed 
up if they have the archive bit set. The archive bit is reset 
after each file is read. 
.TP
\fB-r\fR
Restore. Files are restored to the share 
from the tar file. 
.TP
\fB-l log level\fR
Log (debug) level. Corresponds to the 
\fI-d\fR flag of \fBsmbclient(1)
\fR\&. 
.SH "ENVIRONMENT VARIABLES"
.PP
The \fI$TAPE\fR variable specifies the 
default tape device to write to. May be overridden
with the -t option. 
.SH "BUGS"
.PP
The \fBsmbtar\fR script has different 
options from ordinary tar and tar called from smbclient. 
.SH "CAVEATS"
.PP
Sites that are more careful about security may not like 
the way the script handles PC passwords. Backup and restore work 
on entire shares, should work on file lists. smbtar works best
with GNU tar and may not work well with other versions. 
.SH "DIAGNOSTICS"
.PP
See the \fBDIAGNOSTICS\fR section for the 
\fBsmbclient(1)\fR 
command.
.SH "VERSION"
.PP
This man page is correct for version 2.2 of 
the Samba suite.
.SH "SEE ALSO"
.PP
\fBsmbd(8)\fR, 
\fBsmbclient(1)\fR, 
smb.conf(5),
.SH "AUTHOR"
.PP
The original Samba software and related utilities 
were created by Andrew Tridgell. Samba is now developed
by the Samba Team as an Open Source project similar 
to the way the Linux kernel is developed.
.PP
Ricky Poulten <URL:mailto:poultenr@logica.co.uk> 
wrote the tar extension and this man page. The \fBsmbtar\fR 
script was heavily rewritten and improved by Martin Kraemer <URL:mailto:Martin.Kraemer@mch.sni.de>. Many 
thanks to everyone who suggested extensions, improvements, bug 
fixes, etc. The man page sources were converted to YODL format (another 
excellent piece of Open Source software, available at
ftp://ftp.icce.rug.nl/pub/unix/ <URL:ftp://ftp.icce.rug.nl/pub/unix/>) and updated for the Samba 2.0 
release by Jeremy Allison. The conversion to DocBook for 
Samba 2.2 was done by Gerald Carter.
