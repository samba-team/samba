.\"Generated by db2man.xsl. Don't modify this, modify the source.
.de Sh \" Subsection
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.TH "TDBBACKUP" 8 "" "" ""
.SH NAME
tdbbackup \- tool for backing up and for validating the integrity of samba .tdb files
.SH "SYNOPSIS"

.nf
\fBtdbbackup\fR [-s suffix] [-v] [-h]
.fi

.SH "DESCRIPTION"

.PP
This tool is part of the \fBSamba\fR(1) suite\&.

.PP
\fBtdbbackup\fR is a tool that may be used to backup samba \&.tdb files\&. This tool may also be used to verify the integrity of the \&.tdb files prior to samba startup, in which case, if it find file damage and it finds a prior backup it will restore the backup file\&.

.SH "OPTIONS"

.TP
-h
Get help information\&.


.TP
-s suffix
The \fB-s\fR option allows the adminisistrator to specify a file backup extension\&. This way it is possible to keep a history of tdb backup files by using a new suffix for each backup\&.


.TP
-v
The \fB-v\fR will check the database for damages (currupt data) which if detected causes the backup to be restored\&.


.SH "COMMANDS"

.PP
\fBGENERAL INFORMATION\fR

.PP
The \fBtdbbackup\fR utility should be run as soon as samba has shut down\&. Do NOT run this command on a live database\&. Typical usage for the command will be:

.PP
tdbbackup [-s suffix] *\&.tdb

.PP
Before restarting samba the following command may be run to validate \&.tdb files:

.PP
tdbbackup -v [-s suffix] *\&.tdb

.PP
Samba \&.tdb files are stored in various locations, be sure to run backup all \&.tdb file on the system\&. Imporatant files includes:

.TP 3
\(bu
\fBsecrets.tdb\fR - usual location is in the /usr/local/samba/private directory, or on some systems in /etc/samba\&.

.TP
\(bu
\fBpassdb.tdb\fR - usual location is in the /usr/local/samba/private directory, or on some systems in /etc/samba\&.

.TP
\(bu
\fB*.tdb\fR located in the /usr/local/samba/var directory or on some systems in the /var/cache or /var/lib/samba directories\&.

.LP

.SH "VERSION"

.PP
This man page is correct for version 3\&.0 of the Samba suite\&.

.SH "AUTHOR"

.PP
The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.

.PP
The tdbbackup man page was written by John H Terpstra\&.

